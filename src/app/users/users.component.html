<div class="row px-3 pt-3">
    <div class="col">
        <div class="card shadow rounded bg-white">
            <div class="card-body">
                <div class="row">
                    <div class="col">
                        <h2 class="h2 mb-3">Lista de usuarios</h2>
                        <div class="card-text">
                            En esta sección encontrarás todos los usuarios dentro de la plataforma; como Administrador, puedes activar o desactivar cuentas de usuario.
                        </div>
                    </div>
                </div>
                <div *ngIf="loading" class="text-center pt-5 mt-5">
                    <div class="spinner-border" role="status">
                      <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
                <div class="row py-3">
                    <div class="col" *ngIf="users.length > 0; else noUsersTemplate">
                        <div class="row mb-2">
                            <div class="col">
                                <input [(ngModel)]="searchText" class="form-control bg-white border-dark" placeholder="Filtrar...">
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead class="table-dark">
                                    <tr>
                                        <th>#</th>
                                        <th>Correo</th>
                                        <th>Nombre</th>
                                        <th>Teléfono</th>
                                        <th>Rol</th>
                                        <th>Estado</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let user of users | filter: searchText | paginate: { itemsPerPage: 10, currentPage: p }; index as i">
                                        <td class="align-middle">{{ i + 1 }}</td>
                                        <td class="align-middle">
                                            <img [src]="getPicProfileUser(user.url_img)" class="me-2 rounded-circle" style="width: 30px" alt="Pic">
                                            {{ user.correo }}
                                        </td>
                                        <td class="align-middle">{{ user.nombre }} {{ user.apellidos }}</td>
                                        <td class="align-middle">{{ user.telefono }}</td>
                                        <td class="align-middle">
                                            <span [class]="getRoleClass(user.rol)" class="px-3 py-1 rounded text-capitalize fw-semibold">
                                                {{ getRoleLabel(user.rol) }}
                                            </span>
                                        </td>
                                        <td class="align-middle">
                                            <span [class]="getStatusClass(user.status)" class="px-3 py-1 rounded fw-semibold">
                                                {{ getStatusLabel(user.status) }}
                                            </span>
                                        </td>
                                        <td class="align-middle">
                                            <button *ngIf="user.status === '1'" type="button" class="btn btn-danger py-1 px-2" (click)="changeUserStatus(user)">
                                                <i class="bi bi-trash3-fill"></i>
                                            </button>
                                            <button *ngIf="user.status === '0'" type="button" class="btn btn-success py-1 px-2" (click)="changeUserStatus(user)">
                                                <i class="bi bi-person-fill-up"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="text-end mt-2">
                            <pagination-controls    previousLabel="Anterior"
                                                    nextLabel="Siguiente" 
                                                    (pageChange)="p = $event">
                            </pagination-controls>
                        </div>
                    </div>

                    <ng-template #noUsersTemplate>
                        <div *ngIf="!loading" class="row py-5 my-5">
                            <div class="col text-center">
                                <img src="assets/images/errors/nothing-found.png" class="img-fluid mb-4" style="width: 125px" alt=":/">
                                <h4>No hay usuarios por mostrar</h4>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
        </div>
    </div>
</div>